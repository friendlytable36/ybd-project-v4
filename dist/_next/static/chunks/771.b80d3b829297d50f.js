(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{9327:(e,t,r)=>{var n=r(2381).Symbol;e.exports=n},2731:(e,t,r)=>{var n=r(9327),s=r(7363),a=r(8391),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?s(e):a(e)}},9334:(e,t,r)=>{var n=r(5788),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},1240:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7363:(e,t,r)=>{var n=r(9327),s=Object.prototype,a=s.hasOwnProperty,o=s.toString,u=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var s=o.call(e);return n&&(t?e[u]=r:delete e[u]),s}},8391:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2381:(e,t,r)=>{var n=r(1240),s="object"==typeof self&&self&&self.Object===Object&&self,a=n||s||Function("return this")();e.exports=a},5788:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},2170:(e,t,r)=>{var n=r(3117),s=r(3842),a=r(9666),o=Math.max,u=Math.min;e.exports=function(e,t,r){var c,i,l,f,h,d,v=0,p=!1,g=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var r=c,n=i;return c=i=void 0,v=t,f=e.apply(n,r)}function j(e){var r=e-d,n=e-v;return void 0===d||r>=t||r<0||g&&n>=l}function y(){var e,r,n,a=s();if(j(a))return b(a);h=setTimeout(y,(e=a-d,r=a-v,n=t-e,g?u(n,l-r):n))}function b(e){return(h=void 0,m&&c)?x(e):(c=i=void 0,f)}function _(){var e,r=s(),n=j(r);if(c=arguments,i=this,d=r,n){if(void 0===h)return v=e=d,h=setTimeout(y,t),p?x(e):f;if(g)return clearTimeout(h),h=setTimeout(y,t),x(d)}return void 0===h&&(h=setTimeout(y,t)),f}return t=a(t)||0,n(r)&&(p=!!r.leading,l=(g="maxWait"in r)?o(a(r.maxWait)||0,t):l,m="trailing"in r?!!r.trailing:m),_.cancel=function(){void 0!==h&&clearTimeout(h),v=0,c=d=i=h=void 0},_.flush=function(){return void 0===h?f:b(s())},_}},3117:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},561:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4918:(e,t,r)=>{var n=r(2731),s=r(561);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},3842:(e,t,r)=>{var n=r(2381);e.exports=function(){return n.Date.now()}},9666:(e,t,r)=>{var n=r(9334),s=r(3117),a=r(4918),o=0/0,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=c.test(e);return r||i.test(e)?l(e.slice(2),r?2:8):u.test(e)?o:+e}},6463:(e,t,r)=>{"use strict";var n=r(1169);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},6771:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r(7437),s=r(2265),a=r(6463),o=r(2170),u=r.n(o),c=r(4292);function i(e){let{children:t}=e;return(0,n.jsx)("div",{className:"search__container",children:t})}var l=r(7138),f=r(591),h=r(1633);function d(e){let{query:t,isSuggestionsEnabled:r,state:[o,u]}=e,c=(0,a.usePathname)(),i=(0,a.useSearchParams)(),[d,v]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=e=>{v(e.detail)};return window.addEventListener("setSuggestedItems",e),()=>{window.removeEventListener("setSuggestedItems",e)}},[c,i,v]),(0,s.useEffect)(()=>{if(!t||t.length>15||!r){v([]),u(!1);return}fetch("".concat(h.T5.glitch,"/api/v4/suggest/?q=")+t).then(e=>e.json()).then(e=>{let{suggests:t}=e;v(t),0!==t.length&&u(!0)}).catch(e=>{f.Z.error("[Suggest]: ".concat(e))})},[t,u,v,r]),(0,n.jsx)("div",{className:"search__suggestions ".concat(o&&0!==d.length?"search__suggestions--active":""),children:(0,n.jsx)("ul",{className:"search__suggestions-list",children:d.map(e=>(0,n.jsx)("li",{onClick:()=>u(!1),children:(0,n.jsxs)(l.default,{href:"/search/?q=".concat(e),className:"search__suggestions-item",prefetch:!1,children:[(0,n.jsx)("svg",{className:"search__suggestions-item-icon",children:(0,n.jsx)("use",{href:"#search-icon"})}),(0,n.jsx)("span",{children:e})]})},e))})},t)}function v(){let e=(0,a.useRouter)(),t=(0,a.usePathname)(),r=(0,a.useSearchParams)(),[o,l]=(0,s.useState)(!1),[f,h]=(0,s.useState)(!0),[v,p]=(0,s.useState)(""),g=(r.get("q")||"").toString(),m=()=>l(!1),x=t=>{if("IS_INITIAL_VALUE"!==t&&t)try{if(function(e){try{return new URL(e),!0}catch(e){return!1}}(t)){let r=/(?:[?&]vi?=|\/embed\/|\/\d\d?\/|\/vi?\/|https?:\/\/(?:www\.)?youtu\.be\/)([A-Za-z0-9_\-]{11})/g.exec(t);if(r){e.push("/watch/?id=".concat(r[1]));return}}e.push("/search/?q=".concat(t.trim()))}catch(e){}},j=u()(e=>{h(!0),p(e.target.value)},512);return(0,s.useEffect)(()=>(window.addEventListener("blur",m),()=>{try{window.removeEventListener("blur",m)}catch(e){}}),[]),(0,s.useEffect)(()=>{let e=r.get("q"),t=document.getElementById("searchKeywordInput");e&&t&&(h(!1),p(e),t.value=e),l(!1)},[t,r]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{className:"search__button",onlySpecifiedClass:!0,title:"動画を検索",onClick:()=>x(v),children:(0,n.jsx)("svg",{className:"search__button-icon",children:(0,n.jsx)("use",{href:"#search-icon"})})}),(0,n.jsx)("input",{id:"searchKeywordInput",className:"search__input",type:"text",autoComplete:"off",placeholder:"動画を検索",defaultValue:g,onChange:j,onKeyDown:e=>{"enter"===e.key.toLocaleLowerCase()&&x(e.currentTarget.value)},onFocus:()=>l(!0),onBlur:()=>setTimeout(()=>l(!1),100)}),(0,n.jsx)(d,{query:v,isSuggestionsEnabled:f,state:[o,l]})]})})})}}}]);