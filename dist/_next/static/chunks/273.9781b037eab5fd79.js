(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{3910:function(e,t,n){var r=n(4288).Symbol;e.exports=r},4506:function(e,t,n){var r=n(3910),o=n(4479),s=n(910),u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?o(e):s(e)}},5041:function(e,t,n){var r=n(5035),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},7071:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},4479:function(e,t,n){var r=n(3910),o=Object.prototype,s=o.hasOwnProperty,u=o.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=u.call(e);return r&&(t?e[c]=n:delete e[c]),o}},910:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},4288:function(e,t,n){var r=n(7071),o="object"==typeof self&&self&&self.Object===Object&&self,s=r||o||Function("return this")();e.exports=s},5035:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},7310:function(e,t,n){var r=n(8302),o=n(1121),s=n(6660),u=Math.max,c=Math.min;e.exports=function(e,t,n){var i,a,f,l,h,d,v=0,p=!1,g=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var n=i,r=a;return i=a=void 0,v=t,l=e.apply(r,n)}function j(e){var n=e-d,r=e-v;return void 0===d||n>=t||n<0||g&&r>=f}function y(){var e,n,r,s=o();if(j(s))return b(s);h=setTimeout(y,(e=s-d,n=s-v,r=t-e,g?c(r,f-n):r))}function b(e){return(h=void 0,m&&i)?x(e):(i=a=void 0,l)}function _(){var e,n=o(),r=j(n);if(i=arguments,a=this,d=n,r){if(void 0===h)return v=e=d,h=setTimeout(y,t),p?x(e):l;if(g)return clearTimeout(h),h=setTimeout(y,t),x(d)}return void 0===h&&(h=setTimeout(y,t)),l}return t=s(t)||0,r(n)&&(p=!!n.leading,f=(g="maxWait"in n)?u(s(n.maxWait)||0,t):f,m="trailing"in n?!!n.trailing:m),_.cancel=function(){void 0!==h&&clearTimeout(h),v=0,i=d=a=h=void 0},_.flush=function(){return void 0===h?l:b(o())},_}},8302:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},303:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},8371:function(e,t,n){var r=n(4506),o=n(303);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},1121:function(e,t,n){var r=n(4288);e.exports=function(){return r.Date.now()}},6660:function(e,t,n){var r=n(5041),o=n(8302),s=n(8371),u=0/0,c=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,f=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return u;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=i.test(e);return n||a.test(e)?f(e.slice(2),n?2:8):c.test(e)?u:+e}},9376:function(e,t,n){"use strict";var r=n(5475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},3273:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(7437),o=n(2265),s=n(9376),u=n(7310),c=n.n(u),i=n(6956);function a(e){let{children:t}=e;return(0,r.jsx)("div",{className:"search__container",children:t})}var f=n(7648),l=n(5059),h=n(7099);function d(e){let{query:t,isSuggestionsEnabled:n,state:[u,c]}=e,i=(0,s.usePathname)(),a=(0,s.useSearchParams)(),[d,v]=(0,o.useState)([]);return(0,o.useEffect)(()=>{let e=e=>{v(e.detail)};return window.addEventListener("setSuggestedItems",e),()=>{window.removeEventListener("setSuggestedItems",e)}},[i,a,v]),(0,o.useEffect)(()=>{if(!t||t.length>15||!n){v([]),c(!1);return}fetch("".concat(h.T5.glitch,"/api/v4/suggest/?q=")+t).then(e=>e.json()).then(e=>{let{suggests:t}=e;v(t),0!==t.length&&c(!0)}).catch(e=>{l.Z.error("[Suggest]: ".concat(e))})},[t,c,v,n]),(0,r.jsx)("div",{className:"search__suggestions ".concat(u&&0!==d.length?"search__suggestions--active":""),children:(0,r.jsx)("ul",{className:"search__suggestions-list",children:d.map(e=>(0,r.jsx)("li",{onClick:()=>c(!1),children:(0,r.jsxs)(f.default,{href:"/search/?q=".concat(e),className:"search__suggestions-item",prefetch:!1,children:[(0,r.jsx)("svg",{className:"search__suggestions-item-icon",children:(0,r.jsx)("use",{href:"#search-icon"})}),(0,r.jsx)("span",{children:e})]})},e))})},t)}function v(){let e=(0,s.useRouter)(),t=(0,s.usePathname)(),n=(0,s.useSearchParams)(),[u,f]=(0,o.useState)(!1),[l,h]=(0,o.useState)(!0),[v,p]=(0,o.useState)(""),g=(n.get("q")||"").toString(),m=()=>f(!1),x=t=>{if("IS_INITIAL_VALUE"!==t&&t)try{if(function(e){try{return new URL(e),!0}catch(e){return!1}}(t)){let n=/(?:[?&]vi?=|\/embed\/|\/\d\d?\/|\/vi?\/|https?:\/\/(?:www\.)?youtu\.be\/)([A-Za-z0-9_\-]{11})/g.exec(t);if(n){e.push("/watch/?id=".concat(n[1]));return}}e.push("/search/?q=".concat(t.trim()))}catch(e){}},j=c()(e=>{h(!0),p(e.target.value)},256);return(0,o.useEffect)(()=>(window.addEventListener("blur",m),()=>{try{window.removeEventListener("blur",m)}catch(e){}}),[]),(0,o.useEffect)(()=>{let e=n.get("q"),t=document.getElementById("searchKeywordInput");e&&t&&(h(!1),p(e),t.value=e),f(!1)},[t,n]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"search__button",onlySpecifiedClass:!0,title:"動画を検索",onClick:()=>x(v),children:(0,r.jsx)("svg",{className:"search__button-icon",children:(0,r.jsx)("use",{href:"#search-icon"})})}),(0,r.jsx)("input",{id:"searchKeywordInput",className:"search__input",type:"text",autoComplete:"off",placeholder:"動画を検索",defaultValue:g,onChange:j,onKeyDown:e=>{"enter"===e.key.toLocaleLowerCase()&&x(e.currentTarget.value)},onFocus:()=>f(!0),onBlur:()=>setTimeout(()=>f(!1),100)}),(0,r.jsx)(d,{query:v,isSuggestionsEnabled:l,state:[u,f]})]})})})}}}]);